# ğŸ” ë°°í‹€ ì—”ì§„ ì •í™•ë„ ë¶„ì„ ë³´ê³ ì„œ

## ğŸ“Š í˜„ì¬ ìƒíƒœ

- **ì •í™•ë„**: 74.8%
- **ë¬¸ì œ**: ì‹œë®¬ë ˆì´ì…˜ì´ í•­ìƒ í”Œë ˆì´ì–´ì—ê²Œ ìœ ë¦¬í•˜ê²Œ ì§„í–‰ë¨
  - ì‹¤ì œ íŒ¨ë°°ìœ¨: 26.2%
  - ì‹œë®¬ íŒ¨ë°°ìœ¨: 0.9%

---

## ğŸ¯ ê°œì„  ê°€ëŠ¥ ì§€ì  ë¶„ì„

### 1ï¸âƒ£ **DamageModifiers.py** - ë°ë¯¸ì§€ ë³´ì •

#### âœ… í˜„ì¬ êµ¬í˜„ëœ ê²ƒ

- `BurnModifier`: í™”ìƒ ìƒíƒœ ì‹œ ë¬¼ë¦¬ ê³µê²© 50% ê°ì†Œ
- `WeatherModifier`: ë‚ ì”¨ì— ë”°ë¥¸ ê³µê²© íƒ€ì…ë³„ íš¨ê³¼ (ë¹—ë‚ ì”¨, ë§‘ì€ë‚ ì”¨)
- `CriticalHitModifier`: ê¸‰ì†Œ ì‹œ 1.5ë°°
- `STABModifier`: ê°™ì€ íƒ€ì… ê³µê²© 1.5ë°° (STAB)
- `TypeEffectivenessModifier`: íƒ€ì… ìƒì„±
- `RandomModifier`: 0.85~1.0 ëœë¤ ë³€ë™

#### âŒ ëˆ„ë½ëœ ê²ƒ

1. **íŠ¹ì„±(Ability) íš¨ê³¼** â­â­â­

   - `Adaptability`: STAB 2ë°° (1.5ë°° â†’ 2ë°°)
   - `Dragon Dance`: ìŠ¤í”¼ë“œ ìƒìŠ¹
   - `Intimidate`: ìƒëŒ€ ê³µê²©ë ¥ ê°ì†Œ
   - `Regenerator`: êµì²´ ì‹œ 1/3 íšŒë³µ
   - `Competitive/Defiant`: ëŠ¥ë ¥ì¹˜ ê°ì†Œ ì‹œ íŠ¹ìˆ˜ê³µê²©/ê³µê²© ì¦ê°€
   - **ì˜í–¥ë„**: ë§¤ìš° ë†’ìŒ (í¬ì¼“ëª¬ì˜ ì£¼ìš” ì—­í• ì„ ë‹´ë‹¹)

2. **ì•„ì´í…œ íš¨ê³¼** â­â­â­

   - `Life Orb`: ë°ë¯¸ì§€ 1.3ë°°, ë°˜ë™ 1/10
   - `Choice Band/Scarf/Specs`: ë°ë¯¸ì§€ 1.5ë°° (í•œ ê¸°ìˆ ë§Œ ì‚¬ìš© ê°€ëŠ¥)
   - `Assault Vest`: íŠ¹ìˆ˜ë°©ì–´ 1.5ë°°
   - `Leftovers`: ë§¤í„´ 1/8 íšŒë³µ
   - `Rocky Helmet`: ì ‘ì´‰ ê¸°ìˆ  ì‚¬ìš© ì‹œ ìƒëŒ€ 1/8 ë°ë¯¸ì§€
   - **ì˜í–¥ë„**: ë§¤ìš° ë†’ìŒ (ë°ë¯¸ì§€ì™€ ìƒì¡´ìœ¨ì— ì§ì ‘ ì˜í–¥)

3. **ìƒíƒœì´ìƒ ë²”ì£¼ ë¶€ì¡±** â­â­

   - ë§ˆë¹„(`Paralysis`): ìŠ¤í”¼ë“œ 50% ê°ì†Œ, ëª…ì¤‘ë¥  ì˜í–¥
   - ë…(`Poison`): ë§¤í„´ 1/8 ë°ë¯¸ì§€ (ì¼ë°˜ ë…), 1/8ì”© ëˆ„ì  (ê°•ë…)
   - ìˆ˜ë©´(`Sleep`): ê¸°ìˆ  ì‚¬ìš© ë¶ˆê°€
   - ì–¼ìŒ(`Freeze`): ê¸°ìˆ  ì‚¬ìš© ë¶ˆê°€
   - í˜„ì¬: í™”ìƒë§Œ êµ¬í˜„ë¨
   - **ì˜í–¥ë„**: ì¤‘ê°„ (í˜„ì¬ `_apply_status_damage`ì—ì„œ ë¶€ë¶„ êµ¬í˜„)

4. **í•„ë“œ íš¨ê³¼** â­â­
   - `Terrain`: ê·¸ë¼ìŠ¤ í•„ë“œ(ìŠ¤í”¼ë“œ ì¦ê°€), ì‹¸ì´í‚¥ í•„ë“œ(íŠ¹ë°© ì¦ê°€) ë“±
   - `Reflect`: ë¬¼ë¦¬ ë°©ì–´ë ¥ ì¦ê°€
   - `Light Screen`: íŠ¹ìˆ˜ ë°©ì–´ë ¥ ì¦ê°€
   - `Spikes/Stealth Rock`: êµì²´ ì‹œ ë°ë¯¸ì§€
   - **ì˜í–¥ë„**: ì¤‘ê°„ (ê²Œì„ í›„ë°˜ë¶€ì—ë§Œ ì„¤ì¹˜ë¨)

---

### 2ï¸âƒ£ **SimplifiedBattleEngine.py** - ë°°í‹€ ì—”ì§„ ë¡œì§

#### âœ… í˜„ì¬ êµ¬í˜„ëœ ê²ƒ

- `simulate_turn()`: ê¸°ë³¸ í„´ ì§„í–‰
- `_determine_order()`: ìš°ì„ ë„, ìŠ¤í”¼ë“œ ê¸°ë°˜ í–‰ë™ ìˆœì„œ
- `_calculate_damage()`: ê¸°ë³¸ ë°ë¯¸ì§€ ê³µì‹
- `_check_winner()`: ìŠ¹íŒ¨ íŒì •
- `_auto_switch()`: ê¸°ì ˆ ì‹œ ìë™ êµì²´

#### âŒ ëˆ„ë½ë˜ê±°ë‚˜ ì˜ëª»ëœ ê²ƒ

1. **ëª…ì¤‘ë¥  ë¬´ì‹œ** â­â­â­

   ```python
   def _check_accuracy(self, ...):
       # ì„ì‹œ: ëª…ì¤‘ë¥  í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ í•­ìƒ ëª…ì¤‘
       return True  # âŒ ì´ ë¶€ë¶„ì´ ë¬¸ì œ!
   ```

   - ëª…ì¤‘ë¥ ì´ 100%ê°€ ë˜ì–´ ë¶ˆì•ˆì •í•œ ê¸°ìˆ ë„ í•­ìƒ ë§ìŒ
   - ì‹¤ì œ: Focus Blast(70%), Stone Edge(80%) ë“±ì€ ìì£¼ ë¹—ë‚˜ê°
   - **ì˜í–¥ë„**: ë†’ìŒ (60~80% ëª…ì¤‘ë¥  ê¸°ìˆ ë“¤ì´ ì „ëµì˜ í•µì‹¬)

2. **ê¸‰ì†Œìœ¨ ì„¤ì • ê³¼ë‹¤** â­â­

   ```python
   crit_ratios = [1/24, 1/8, 1/2, 1/1]  # ë§ˆì§€ë§‰ì´ 100% (?!)
   ```

   - ì¼ë°˜ì ìœ¼ë¡œ ê¸‰ì†Œìœ¨: 1/24, 1/8, 1/2, 1/4 ì •ë„
   - í˜„ì¬ crit_stage 3 ì´ìƒì´ë©´ í•­ìƒ ê¸‰ì†Œ (100%)
   - **ì‹¤ì œ í¬ì¼“ëª¬**: ìµœëŒ€ 1/4 ê¸‰ì†Œ ê´€í†µ ëŠ¥ë ¥ ì •ë„
   - **ì˜í–¥ë„**: ì¤‘ê°„ (ê¸‰ì†Œ ìì²´ëŠ” ë‚®ì€ í™•ë¥ )

3. **ì„ í›„ê³µ ë™ì† ì²˜ë¦¬** â­

   ```python
   if speed1 > speed2:
       return attacker1, move1, attacker2, move2
   elif speed2 > speed1:
       return attacker2, move2, attacker1, move1
   # 3. ë™ì†: ëœë¤ (50:50)  â† ì‹¤ì œëŠ” ë°°í‹€ ID/í„´ ë²ˆí˜¸ë¡œ ê²°ì •
   if random.random() < 0.5:
   ```

   - í˜„ì¬: ì™„ì „ ëœë¤ 50:50
   - ì‹¤ì œ: ë°°í‹€ì— ë”°ë¼ ê²°ì •ì (deterministic) - ê°™ì€ ì¡°ê±´ì´ë©´ ê°™ì€ ê²°ê³¼
   - **ì˜í–¥ë„**: ë‚®ìŒ (ë™ì†ì€ ë“œë¬¸ ê²½ìš°)

4. **ê¸°ìˆ  íš¨ê³¼ ë¯¸í¡** â­â­â­

   - í˜„ì¬: ë°ë¯¸ì§€ë§Œ ê³„ì‚°í•˜ê³  ì¶”ê°€ íš¨ê³¼ ë¬´ì‹œ

   ```python
   # 4. ì¶”ê°€ íš¨ê³¼ (TODO: ë‚˜ì¤‘ì— êµ¬í˜„)
   # - ìƒíƒœì´ìƒ
   # - ëŠ¥ë ¥ì¹˜ ë³€í™”
   # - ë°˜ë™/í¡í˜ˆ
   ```

   - ëˆ„ë½ëœ íš¨ê³¼:
     - **ìƒíƒœì´ìƒ**: Burn(í™”ìƒ), Thunder Wave(ë§ˆë¹„), etc.
     - **ëŠ¥ë ¥ì¹˜ ë³€í™”**: Close Combat(-ë°©ì–´,-íŠ¹ë°©), Swords Dance(+ê³µê²©)
     - **ë°˜ë™/í¡í˜ˆ**: Recoil(ë°˜ë™), Drain(í¡ìˆ˜)
     - **ìì²´ ë¶€ìŠ¤íŠ¸**: Swordsdance(ìì‹  ê³µê²© 2ë°°)
   - **ì˜í–¥ë„**: ë§¤ìš° ë†’ìŒ (ì¤‘ìš” ê¸°ìˆ ë“¤ì˜ ì£¼ìš” íŠ¹ì§•)

5. **í„´ ì¢…ë£Œ ì²˜ë¦¬ ë¶€ì¡±** â­â­

   ```python
   def _end_of_turn(self, battle: SimplifiedBattle):
       self._apply_weather_damage(battle)
       self._apply_status_damage(battle.active_pokemon)
   ```

   - ëˆ„ë½ëœ ê²ƒ:
     - ë‚ ì”¨ ì§€ì† í„´ ê°ì†Œ
     - í•„ë“œ íš¨ê³¼ ì§€ì† í„´ ê°ì†Œ
     - Stealth Rock/Spikes ë°ë¯¸ì§€
     - ëŠ¥ë ¥ì¹˜ ë³€í™” ë§Œë£Œ
   - **ì˜í–¥ë„**: ì¤‘ê°„

6. **í¬ì¼“ëª¬ êµì²´ ì „ëµ ì—†ìŒ** â­â­â­
   ```python
   def _auto_switch(self, battle: SimplifiedBattle, is_player: bool):
       alive_pokemon = [p for p in team.values() if p.current_hp > 0]
       new_active = random.choice(available)  # âŒ ì™„ì „ ëœë¤!
   ```
   - í˜„ì¬: ì‚´ì•„ìˆëŠ” í¬ì¼“ëª¬ ì¤‘ ëœë¤ ì„ íƒ
   - ì‹¤ì œ: ìƒì„±, HP ìƒíƒœ, ì„¤ì¹˜ëœ í•„ë“œ ë“±ì„ ê³ ë ¤í•œ ì „ëµì  êµì²´
   - ìƒëŒ€ë°©ë„ ì´ë¥¼ ê³ ë ¤í•´ ê¸°ìˆ  ì„ íƒ
   - **ì˜í–¥ë„**: ë§¤ìš° ë†’ìŒ (êµì²´ëŠ” í¬ì¼“ëª¬ ì „ëµì˜ í•µì‹¬)

---

### 3ï¸âƒ£ **SimplifiedBattle.py** - ë°°í‹€ ìƒíƒœ ê´€ë¦¬

#### âœ… í˜„ì¬ êµ¬í˜„ëœ ê²ƒ

- í¬ì¼“ëª¬ ì •ë³´ ì €ì¥
- í•„ë“œ/ë‚ ì”¨ ìƒíƒœ ì¶”ì 
- ìƒëŒ€ í¬ì¼“ëª¬ ì •ë³´ ì¶”ì • (`fill_unknown_data`)

#### âŒ ëˆ„ë½ë˜ê±°ë‚˜ ë¬¸ì œìˆëŠ” ê²ƒ

1. **ìƒëŒ€ í¬ì¼“ëª¬ ì •ë³´ ì¶”ì • í¸í–¥** â­â­â­

   ```python
   if len(self.opponent_team) < 6:
       # ëœë¤ìœ¼ë¡œ ë¯¸ê³µê°œ í¬ì¼“ëª¬ ì¶”ê°€
       dummy_pokemon = self._create_dummy_pokemon(species)
   ```

   - í˜„ì¬: ì™„ì „ ëœë¤ í¬ì¼“ëª¬ ì¶”ê°€
   - ë¬¸ì œì :
     - ê²½ìŸ í¬ì¼“ëª¬(Competitive tier)ì—ì„œ **ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” í¬ì¼“ëª¬**ì´ ì„ íƒë  ìˆ˜ ìˆìŒ
     - ì‹¤ì œ ë°°í‹€ì—ì„œëŠ” ê²½ìŸë ¥ ìˆëŠ” í¬ì¼“ëª¬ë“¤ë§Œ ë‚˜ì˜´
     - ì•½í•œ í¬ì¼“ëª¬ìœ¼ë¡œ ê°€ì •í•˜ë©´ ì‹œë®¬ë ˆì´ì…˜ì´ ë„ˆë¬´ ìœ ë¦¬í•´ì§
   - **ì˜í–¥ë„**: ë§¤ìš° ë†’ìŒ (ìƒëŒ€ë°© ê°•ë„ë¥¼ ê³¼ì†Œí‰ê°€)

2. **í¬ì¼“ëª¬ ê¸°ìˆ  ìƒì„± ì „ëµ** â­â­â­

   ```python
   def _generate_random_moves_fallback(self, pokemon):
       # ê¸°ìˆ  ì„ íƒ ì „ëµ:
       # 1. STAB ê¸°ìˆ  ìš°ì„  (ìµœì†Œ 2ê°œ, BP 70ì´ìƒ)
       # 2. ê°•í•œ ìƒì„± ê·¹ë³µ (BP 80+)
       # 3. ì¤‘ê°„ ìƒì„± ê·¹ë³µ (BP 60-79)
       # 4. ì•½í•œ ìƒì„± ê·¹ë³µ (BP 50-59)
       # 5. ìƒíƒœ ê¸°ìˆ  (BP 0)
   ```

   - ë¬¸ì œì :
     - **í¬ì¼“ëª¬ë³„ í˜„ì‹¤ì ì¸ ê¸°ìˆ ì…‹ ì—†ìŒ**: ëœë¤ ìƒì„± ëŒ€ì‹  ì‹¤ì œ ê²½ìŸ í™˜ê²½ì˜ ê¸°ìˆ ì…‹ ë°ì´í„° í•„ìš”
     - ì˜ˆ: SalamenceëŠ” ë³´í†µ `Outrage, Earthquake, Dragon Dance, Defog` ì •ë„ë§Œ ì‚¬ìš©
     - **ìƒíƒœ ê¸°ìˆ  ì„ íƒ ë¶€ì¡±**: Toxic(ë§¹ë…), Thunder Wave(ë§ˆë¹„) ê°™ì€ ì „ìˆ ì´ ì—†ìŒ
   - **ì˜í–¥ë„**: ë§¤ìš° ë†’ìŒ (í¬ì¼“ëª¬ì˜ ì‹¤ì œ ì—­í• ê³¼ ë‹¤ë¦„)

3. **ì´ˆê¸° ìƒíƒœ ê°’ ì˜¤ë¥˜ ê°€ëŠ¥ì„±** â­
   ```python
   self.won = poke_env_battle.won if hasattr(poke_env_battle, 'won') else False
   self.lost = poke_env_battle.lost if hasattr(poke_env_battle, 'lost') else False
   ```
   - `hasattr` ì²´í¬ëŠ” ì¢‹ì§€ë§Œ, Battle ê°ì²´ê°€ ë³€ê²½ë˜ë©´ ëˆ„ë½ë  ìˆ˜ ìˆìŒ
   - SimplifiedBattle ìƒì„± ì‹œì ê³¼ ì‹œë®¬ë ˆì´ì…˜ í‰ê°€ ì‹œì  ì°¨ì´ ë°œìƒ

---

## ğŸš€ ìš°ì„ ìˆœìœ„ë³„ ê°œì„  ë°©ì•ˆ

### Phase 1: ê¸´ê¸‰ (24~48ì‹œê°„)

1. **ëª…ì¤‘ë¥  ë³µêµ¬** (SimplifiedBattleEngine.py)

   - `_check_accuracy()` í™œì„±í™” ë° í…ŒìŠ¤íŠ¸
   - í˜„ì¬ return True â†’ ì‹¤ì œ ëª…ì¤‘ë¥  ê³„ì‚° ì‚¬ìš©

2. **ê¸°ìˆ  ì¶”ê°€ íš¨ê³¼ êµ¬í˜„** (SimplifiedBattleEngine.py + DamageModifiers.py)
   - Stat boost (Swords Dance, Close Combat ë“±)
   - Status condition (Burn, Paralysis, Toxic)
   - Recoil/Drain (Recoil, Drain Punch)

### Phase 2: ì¤‘ìš” (1ì£¼ì¼)

3. **íŠ¹ì„± íš¨ê³¼ êµ¬í˜„** (DamageModifiers.py + SimplifiedBattleEngine.py)

   - Adaptability, Dragon Dance, Intimidate ë“± ì£¼ìš” íŠ¹ì„± 5-10ê°œ
   - íŠ¹ì„±ë³„ modifier í´ë˜ìŠ¤ ì¶”ê°€

4. **ì•„ì´í…œ íš¨ê³¼ êµ¬í˜„** (DamageModifiers.py)

   - Life Orb, Choice Band, Assault Vest ë“±
   - ì¥ë¹„ë³„ damage multiplier ë° íŠ¹ìˆ˜ íš¨ê³¼

5. **ìƒëŒ€ í¬ì¼“ëª¬ ì •ë³´ ê°œì„ ** (SimplifiedBattle.py)
   - ê²½ìŸ í™˜ê²½ í¬ì¼“ëª¬ ëª©ë¡ ë°ì´í„°ë² ì´ìŠ¤ ì¶”ê°€
   - Tierë³„ ì‚¬ìš©ë¥  ê¸°ë°˜ ê°€ì¤‘ì¹˜ ì ìš©

### Phase 3: ì„±ëŠ¥ ìµœì í™” (2ì£¼ì¼)

6. **ê¸°ìˆ ì…‹ ë°ì´í„°ë² ì´ìŠ¤** (SimplifiedBattle.py)

   - ê²½ìŸ í™˜ê²½ ê¸°ìˆ ì…‹ í†µê³„ ë°ì´í„° ì¶”ê°€
   - í¬ì¼“ëª¬ë³„ ì¼ë°˜ì ì¸ ê¸°ìˆ ì…‹ 3-5ê°œ ì„ íƒ

7. **êµì²´ ì „ëµ** (SimplifiedBattleEngine.py)

   - íƒ€ì… ìƒì„± ê¸°ë°˜ ìŠ¤ë§ˆíŠ¸ êµì²´
   - ìš°ì„ ë„ ë¡œì§ ì¶”ê°€

8. **í•„ë“œ íš¨ê³¼ ë° í„´ ê´€ë¦¬** (SimplifiedBattleEngine.py)
   - í•„ë“œ ì§€ì† í„´ ì¹´ìš´íŠ¸
   - Stealth Rock/Spikes ë°ë¯¸ì§€

---

## ğŸ“ˆ ì˜ˆìƒ íš¨ê³¼

| ê°œì„  ì‚¬í•­        | ì˜ˆìƒ ì •í™•ë„ ê°œì„  | ìš°ì„ ìˆœìœ„ |
| ---------------- | ---------------- | -------- |
| ëª…ì¤‘ë¥  ë³µêµ¬      | +5~10%           | â­â­â­   |
| ê¸°ìˆ  ì¶”ê°€ íš¨ê³¼   | +10~15%          | â­â­â­   |
| íŠ¹ì„± íš¨ê³¼        | +8~12%           | â­â­â­   |
| ì•„ì´í…œ íš¨ê³¼      | +5~8%            | â­â­     |
| ìƒëŒ€íŒ€ ì¶”ì • ê°œì„  | +5~10%           | â­â­â­   |
| ê¸°ìˆ ì…‹ ë°ì´í„°    | +3~7%            | â­â­     |

**ìµœì¢… ëª©í‘œ**: ì •í™•ë„ **85~90%** ë‹¬ì„±

---

## ğŸ”§ êµ¬ì²´ì ì¸ ì½”ë“œ ê°œì„  ì˜ˆì‹œ

### 1. ëª…ì¤‘ë¥  (5ë¶„)

```python
def _check_accuracy(self, attacker, defender, move):
    if move.accuracy is None or move.accuracy >= 100:
        return True

    acc_boost = attacker.boosts.get('accuracy', 0)
    eva_boost = defender.boosts.get('evasion', 0)

    # ê³„ì‚°ì‹ (í˜„ì¬ ì£¼ì„ ì²˜ë¦¬ëœ ê²ƒ í™œì„±í™”)
    multiplier = (3 + acc_boost) / (3 + eva_boost)
    final_acc = move.accuracy * multiplier

    return random.random() * 100 < final_acc
```

### 2. Stat Boost ê¸°ìˆ  (30ë¶„)

```python
class StatBoostModifier(DamageModifier):
    def apply_after_move(self, attacker, move):
        if move.self_boost:
            for stat, amount in move.self_boost.items():
                attacker.boost(stat, amount)
```

### 3. íŠ¹ì„± ë°ë¯¸ì§€ ë³´ì • (1ì‹œê°„)

```python
class AbilityModifier(DamageModifier):
    def apply(self, damage, attacker, defender, move, crit, context):
        if attacker.ability == "Adaptability" and move.type in attacker.types:
            return damage * 2  # STAB 1.5ë°° â†’ 2ë°°
        return damage
```

---

## ğŸ’¡ ê²°ë¡ 

í˜„ì¬ **74.8%** ì •í™•ë„ëŠ” ê¸°ë³¸ í‹€ë§Œ êµ¬í˜„ëœ ìƒíƒœì´ë©°, **ëª…ì¤‘ë¥  ë¬´ì‹œ**, **ê¸°ìˆ  íš¨ê³¼ ë¯¸í¡**, **ìƒëŒ€íŒ€ ì •ë³´ ì¶”ì • í¸í–¥**ì´ ì£¼ìš” ì›ì¸ì…ë‹ˆë‹¤.

**20~30ì‹œê°„ì˜ ì¶”ê°€ ê°œë°œ**ìœ¼ë¡œ **85~90%** ìˆ˜ì¤€ì˜ ì •í™•í•œ ë°°í‹€ ì‹œë®¬ë ˆì´í„°ë¥¼ ì™„ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
